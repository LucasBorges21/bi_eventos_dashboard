// ============================================================================
// üß± Medidas Base
// ============================================================================
Total Vendas = 
SUM(fato_vendas[valor_total])

Qtd Produtos Vendidos = 
SUM(fato_vendas[quantidade])

Qtd Vendas = COUNTROWS(dim_pedidos)

Meta % Recebido = 0.9

// ============================================================================
// üí≥ Receitas por Status
// ============================================================================
Receita Confirmada = 
CALCULATE(
    [Total Vendas],
    FILTER(
        fato_vendas,
        fato_vendas[status_pagamento] = "confirmado"
))

Receita_Pendente = 
CALCULATE(
    [Total Vendas],
    FILTER(
        fato_vendas,
        fato_vendas[status_pagamento] in {"estornado", "pendente"}
))

// ============================================================================
// ‚è±Ô∏è Intelig√™ncia de Tempo
// ============================================================================
Receita Mensal = [Total Vendas]
// Organiza√ß√£o e uso para visuais com datas

Receita Mes Anterior = 
CALCULATE(
    [Total Vendas],
    DATEADD(
        'dim_calend√°rio'[Date],
        -1,
        MONTH
    )
)

Receita YTD = 
TOTALYTD(
    [Total Vendas],
    'dim_calend√°rio'[Date]
)

// ============================================================================
// üìä Indicadores / Raz√µes
// ============================================================================
% Recebido = 
DIVIDE(
    [Receita Confirmada],
    [Total Vendas],
    0
)

Gap % Recebido = [Meta % Recebido] - [% Recebido]

Ticket M√©dio = 
DIVIDE(
    [Total Vendas],
    [Qtd Vendas],
    0
)

Varia√ß√£o % M/M = 
DIVIDE(
    ([Receita Mensal] - [Receita Mes Anterior] ),
    [Receita Mes Anterior]
)
